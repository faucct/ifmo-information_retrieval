# Отчёт

## Первичная обработка данных

Для чтения XML и выделения ссылок из HTML использовался пакет `lxml`, а для выделения текста из HTML – `html_text`.

Каждая партиция обрабатывалась параллельно. Результаты предобработки были экспортированы в два вида файлов, каждые строчки которых соответствовали документам из исходных партиций и содержали:
* текстовые данные, закодированные в UTF-8 + Base64
* ссылки, закодированные в UTF-8 + Base64 и разделённые символом ','

Предобработка занимает примерно десять минут.

![Byte lengths](byte_lengths.png)

Кодировка текста – Windows-1251. Незнакомые символы считались как 1 байт.

![Word lengths](word_lengths.png)

Пробельные символы разбивали текст на слова.

![Text to HTML ratios](html_text_ratios.png)

# Часть 2. Морфология

Все что здесь описано можно увидеть в файле morphological_analysis/01.ipynb

## Обработка

Текст переведен в нижний регистр.

Пропущен через mystem для лемматизации.

С этим связанно несколько эффектов.

Mystem самостоятельно убирает знаки препинания (кроме дефиса).
Слова через дефис остаются как есть (Пример юго-западный).
Не совсем понятно является ли это оптимальным способом, на данный момент решено оставить так. Это и следующее решение в основном принимаются из принципа простоты и лаконичности решения. С дальнейшей возможностью улучшения.

Если слово не знакомо, mystem его не меняет. Самый большой пример, все английские слова остаются неизменны (men man). На данный момент решено это оставить в таком состоянии, так как непонятно, нужны ли улучшения в данном аспекте, по какой метрике их считать.


## Some statistics

Никаких дополнительный фильтраций, помимо указанных выше, или действий перед сбором статистики не проводилось.

stop_words: 29703198, normal_words: 122122345, frequency: 0.19564032120734784

Средняя длинна слова в словаре: 9.16024478452464. Средняя длинна слова в коллекции: 5.7932990037124386

Английским словом считается множество состоящие только из символов английского алфавита.

Английские слова: 26740747, не английские слова: 125084796, frequency: 0.17612811699280403

## Обработка

После этого были выкинуты все английские слова и стоп слова для большей информативности idf and cf

## Idf top

[(0.4604731885142856, 'весь'),
 (0.5552042829483363, 'сайт'),
 (0.6323719818454865, 'главный'),
 (0.6763588957542469, 'новость'),
 (0.7213203432435397, 'поиск'),
 (0.8204693191352953, 'форум'),
 (0.8222996034539128, 'новый'),
 (0.8311915987245914, 'год'),
 (0.8343766992986825, 'беларусь'),
 (0.8434004651085082, 'минск')]



## Cf top

[(0.006228916399576363, 'сообщение'),
 (0.004750266398346566, 'г'),
 (0.0046756817808818844, 'весь'),
 (0.00462552535553032, 'это'),
 (0.004579929558320044, 'год'),
 (0.003940445619290212, 'беларусь'),
 (0.0037545397383675623, 'р'),
 (0.003464945093496966, 'который'),
 (0.003435400610503506, 'мочь'),
 (0.0033483817287271703, 'форум')]


## Log log График

![Log log](loglog.png)

## Граф гиперссылок

Помимо ссылок со страницы при первичной обработке находилась ссылка на саму страницу.
Затем с её помощью брались абсолютные ссылки. И после записывались в строку через ',' где первой стоит ссылка на саму страницу.

После по всем партициям были найдены n самых популярных странниц, т.е. страниц с наибольшим числом ссылок на них.
Все остальные странницы выкидывались из рассмотрения и граф ссылок строился только для самых популярных странниц.
Это было сделано т.к. граф для всех 200000 страниц был бы не читаем.
В качестве n было выбрано 500 и 1000.

![500 urls link graph](url500.png)

![1000 urls link graph](url1000.png)

Как видно многие страницы образуют отдельные компоненты связности, которые соответствуют различным интернет порталам.
